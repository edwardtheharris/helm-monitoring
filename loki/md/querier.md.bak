
querier object Configuration for the querier

{
  "affinity": {
    "podAntiAffinity": {
      "requiredDuringSchedulingIgnoredDuringExecution": [
        {
          "labelSelector": {
            "matchLabels": {
              "app.kubernetes.io/component": "querier",
              "app.kubernetes.io/instance": "{{ .Release.Name }}",
              "app.kubernetes.io/name": "{{ include \"loki.name\" . }}"
            }
          },
          "topologyKey": "kubernetes.io/hostname"
        }
      ]
    }
  },
  "appProtocol": {
    "grpc": ""
  },
  "autoscaling": {
    "behavior": {
      "enabled": false,
      "scaleDown": {},
      "scaleUp": {}
    },
    "customMetrics": [],
    "enabled": false,
    "maxReplicas": 3,
    "minReplicas": 1,
    "targetCPUUtilizationPercentage": 60,
    "targetMemoryUtilizationPercentage": null
  },
  "command": null,
  "dnsConfig": {},
  "extraArgs": [],
  "extraContainers": [],
  "extraEnv": [],
  "extraEnvFrom": [],
  "extraVolumeMounts": [],
  "extraVolumes": [],
  "hostAliases": [],
  "hostUsers": "nil",
  "image": {
    "registry": null,
    "repository": null,
    "tag": null
  },
  "initContainers": [],
  "maxSurge": 0,
  "maxUnavailable": null,
  "nodeSelector": {},
  "podAnnotations": {},
  "podLabels": {},
  "priorityClassName": null,
  "replicas": 0,
  "resources": {},
  "serviceAnnotations": {},
  "serviceLabels": {},
  "serviceType": "ClusterIP",
  "terminationGracePeriodSeconds": 30,
  "tolerations": [],
  "topologySpreadConstraints": [
    {
      "labelSelector": {
        "matchLabels": {
          "app.kubernetes.io/component": "querier",
          "app.kubernetes.io/instance": "{{ .Release.Name }}",
          "app.kubernetes.io/name": "{{ include \"loki.name\" . }}"
        }
      },
      "maxSkew": 1,
      "topologyKey": "kubernetes.io/hostname",
      "whenUnsatisfiable": "ScheduleAnyway"
    }
  ]
}

querier.affinity object Affinity for querier pods. The value will be passed through tpl.

Hard node anti-affinity

querier.appProtocol object Adds the appProtocol field to the querier service. This allows querier to work with istio protocol selection.

{
  "grpc": ""
}

querier.appProtocol.grpc string Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"

""

querier.autoscaling.behavior.enabled bool Enable autoscaling behaviours

false

querier.autoscaling.behavior.scaleDown object define scale down policies, must conform to HPAScalingRules

{}

querier.autoscaling.behavior.scaleUp object define scale up policies, must conform to HPAScalingRules

{}

querier.autoscaling.customMetrics list Allows one to define custom metrics using the HPA/v2 schema (for example, Pods, Object or External metrics)

[]

querier.autoscaling.enabled bool Enable autoscaling for the querier, this is only used if `indexGateway.enabled: true`

false

querier.autoscaling.maxReplicas int Maximum autoscaling replicas for the querier

3

querier.autoscaling.minReplicas int Minimum autoscaling replicas for the querier

1

querier.autoscaling.targetCPUUtilizationPercentage int Target CPU utilisation percentage for the querier

60

querier.autoscaling.targetMemoryUtilizationPercentage string Target memory utilisation percentage for the querier

null

querier.command string Command to execute instead of defined in Docker image

null

querier.dnsConfig object DNSConfig for querier pods

{}

querier.extraArgs list Additional CLI args for the querier

[]

querier.extraContainers list Containers to add to the querier pods

[]

querier.extraEnv list Environment variables to add to the querier pods

[]

querier.extraEnvFrom list Environment variables from secrets or configmaps to add to the querier pods

[]

querier.extraVolumeMounts list Volume mounts to add to the querier pods

[]

querier.extraVolumes list Volumes to add to the querier pods

[]

querier.hostAliases list hostAliases to add

[]

querier.hostUsers string Use the host's user namespace in the querier

"nil"

querier.image.registry string The Docker registry for the querier image. Overrides `loki.image.registry`

null

querier.image.repository string Docker image repository for the querier image. Overrides `loki.image.repository`

null

querier.image.tag string Docker image tag for the querier image. Overrides `loki.image.tag`

null

querier.initContainers list Init containers to add to the querier pods

[]

querier.maxSurge int Max Surge for querier pods

0

querier.maxUnavailable string Pod Disruption Budget maxUnavailable

null

querier.nodeSelector object Node selector for querier pods

{}

querier.podAnnotations object Annotations for querier pods

{}

querier.podLabels object Labels for querier pods

{}

querier.priorityClassName string The name of the PriorityClass for querier pods

null

querier.replicas int Number of replicas for the querier

0

querier.resources object Resource requests and limits for the querier

{}

querier.serviceAnnotations object Annotations for querier service

{}

querier.serviceLabels object Labels for querier service

{}

querier.serviceType string Service Type for querier service

"ClusterIP"

querier.terminationGracePeriodSeconds int Grace period to allow the querier to shutdown before it is killed

30

querier.tolerations list Tolerations for querier pods

[]

querier.topologySpreadConstraints list topologySpread for querier pods. The value will be passed through tpl.

Defaults to allow skew no more then 1 node

queryFrontend object Configuration for the query-frontend

{
  "affinity": {
    "podAntiAffinity": {
      "requiredDuringSchedulingIgnoredDuringExecution": [
        {
          "labelSelector": {
            "matchLabels": {
              "app.kubernetes.io/component": "query-frontend",
              "app.kubernetes.io/instance": "{{ .Release.Name }}",
              "app.kubernetes.io/name": "{{ include \"loki.name\" . }}"
            }
          },
          "topologyKey": "kubernetes.io/hostname"
        }
      ]
    }
  },
  "appProtocol": {
    "grpc": ""
  },
  "autoscaling": {
    "behavior": {
      "enabled": false,
      "scaleDown": {},
      "scaleUp": {}
    },
    "customMetrics": [],
    "enabled": false,
    "maxReplicas": 3,
    "minReplicas": 1,
    "targetCPUUtilizationPercentage": 60,
    "targetMemoryUtilizationPercentage": null
  },
  "command": null,
  "extraArgs": [],
  "extraContainers": [],
  "extraEnv": [],
  "extraEnvFrom": [],
  "extraVolumeMounts": [],
  "extraVolumes": [],
  "hostAliases": [],
  "hostUsers": "nil",
  "image": {
    "registry": null,
    "repository": null,
    "tag": null
  },
  "initContainers": [],
  "maxUnavailable": null,
  "nodeSelector": {},
  "podAnnotations": {},
  "podLabels": {},
  "priorityClassName": null,
  "replicas": 0,
  "resources": {},
  "serviceAnnotations": {},
  "serviceLabels": {},
  "serviceType": "ClusterIP",
  "terminationGracePeriodSeconds": 30,
  "tolerations": [],
  "topologySpreadConstraints": []
}

queryFrontend.affinity object Affinity for query-frontend pods. The value will be passed through tpl.

Hard node anti-affinity

queryFrontend.appProtocol object Adds the appProtocol field to the queryFrontend service. This allows queryFrontend to work with istio protocol selection.

{
  "grpc": ""
}

queryFrontend.appProtocol.grpc string Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"

""

queryFrontend.autoscaling.behavior.enabled bool Enable autoscaling behaviours

false

queryFrontend.autoscaling.behavior.scaleDown object define scale down policies, must conform to HPAScalingRules

{}

queryFrontend.autoscaling.behavior.scaleUp object define scale up policies, must conform to HPAScalingRules

{}

queryFrontend.autoscaling.customMetrics list Allows one to define custom metrics using the HPA/v2 schema (for example, Pods, Object or External metrics)

[]

queryFrontend.autoscaling.enabled bool Enable autoscaling for the query-frontend

false

queryFrontend.autoscaling.maxReplicas int Maximum autoscaling replicas for the query-frontend

3

queryFrontend.autoscaling.minReplicas int Minimum autoscaling replicas for the query-frontend

1

queryFrontend.autoscaling.targetCPUUtilizationPercentage int Target CPU utilisation percentage for the query-frontend

60

queryFrontend.autoscaling.targetMemoryUtilizationPercentage string Target memory utilisation percentage for the query-frontend

null

queryFrontend.command string Command to execute instead of defined in Docker image

null

queryFrontend.extraArgs list Additional CLI args for the query-frontend

[]

queryFrontend.extraContainers list Containers to add to the query-frontend pods

[]

queryFrontend.extraEnv list Environment variables to add to the query-frontend pods

[]

queryFrontend.extraEnvFrom list Environment variables from secrets or configmaps to add to the query-frontend pods

[]

queryFrontend.extraVolumeMounts list Volume mounts to add to the query-frontend pods

[]

queryFrontend.extraVolumes list Volumes to add to the query-frontend pods

[]

queryFrontend.hostAliases list hostAliases to add

[]

queryFrontend.hostUsers string Use the host's user namespace in the query-frontend

"nil"

queryFrontend.image.registry string The Docker registry for the query-frontend image. Overrides `loki.image.registry`

null

queryFrontend.image.repository string Docker image repository for the query-frontend image. Overrides `loki.image.repository`

null

queryFrontend.image.tag string Docker image tag for the query-frontend image. Overrides `loki.image.tag`

null

queryFrontend.initContainers list init containers to add to the query-frontend pods

[]

queryFrontend.maxUnavailable string Pod Disruption Budget maxUnavailable

null

queryFrontend.nodeSelector object Node selector for query-frontend pods

{}

queryFrontend.podAnnotations object Annotations for query-frontend pods

{}

queryFrontend.podLabels object Labels for query-frontend pods

{}

queryFrontend.priorityClassName string The name of the PriorityClass for query-frontend pods

null

queryFrontend.replicas int Number of replicas for the query-frontend

0

queryFrontend.resources object Resource requests and limits for the query-frontend

{}

queryFrontend.serviceAnnotations object Annotations for query-frontend service

{}

queryFrontend.serviceLabels object Labels for query-frontend service

{}

queryFrontend.serviceType string Service Type for query-frontend service

"ClusterIP"

queryFrontend.terminationGracePeriodSeconds int Grace period to allow the query-frontend to shutdown before it is killed

30

queryFrontend.tolerations list Tolerations for query-frontend pods

[]

queryFrontend.topologySpreadConstraints list Topology Spread Constraints for query-frontend pods The value will be passed through tpl.

[]

queryScheduler object Configuration for the query-scheduler

{
  "affinity": {
    "podAntiAffinity": {
      "requiredDuringSchedulingIgnoredDuringExecution": [
        {
          "labelSelector": {
            "matchLabels": {
              "app.kubernetes.io/component": "query-scheduler",
              "app.kubernetes.io/instance": "{{ .Release.Name }}",
              "app.kubernetes.io/name": "{{ include \"loki.name\" . }}"
            }
          },
          "topologyKey": "kubernetes.io/hostname"
        }
      ]
    }
  },
  "appProtocol": {
    "grpc": ""
  },
  "dnsConfig": {},
  "extraArgs": [],
  "extraContainers": [],
  "extraEnv": [],
  "extraEnvFrom": [],
  "extraVolumeMounts": [],
  "extraVolumes": [],
  "hostAliases": [],
  "hostUsers": "nil",
  "image": {
    "registry": null,
    "repository": null,
    "tag": null
  },
  "initContainers": [],
  "maxUnavailable": 1,
  "nodeSelector": {},
  "podAnnotations": {},
  "podLabels": {},
  "priorityClassName": null,
  "replicas": 0,
  "resources": {},
  "serviceAnnotations": {},
  "serviceLabels": {},
  "terminationGracePeriodSeconds": 30,
  "tolerations": [],
  "topologySpreadConstraints": []
}

queryScheduler.affinity object Affinity for query-scheduler pods. The value will be passed through tpl.

Hard node anti-affinity

queryScheduler.appProtocol object Set the optional grpc service protocol. Ex: "grpc", "http2" or "https"

{
  "grpc": ""
}

queryScheduler.dnsConfig object DNSConfig for query-scheduler

{}

queryScheduler.extraArgs list Additional CLI args for the query-scheduler

[]

queryScheduler.extraContainers list Containers to add to the query-scheduler pods

[]

queryScheduler.extraEnv list Environment variables to add to the query-scheduler pods

[]

queryScheduler.extraEnvFrom list Environment variables from secrets or configmaps to add to the query-scheduler pods

[]

queryScheduler.extraVolumeMounts list Volume mounts to add to the query-scheduler pods

[]

queryScheduler.extraVolumes list Volumes to add to the query-scheduler pods

[]

queryScheduler.hostAliases list hostAliases to add

[]

queryScheduler.hostUsers string Use the host's user namespace in the query-scheduler

"nil"

queryScheduler.image.registry string The Docker registry for the query-scheduler image. Overrides `loki.image.registry`

null

queryScheduler.image.repository string Docker image repository for the query-scheduler image. Overrides `loki.image.repository`

null

queryScheduler.image.tag string Docker image tag for the query-scheduler image. Overrides `loki.image.tag`

null

queryScheduler.initContainers list init containers to add to the query-scheduler pods

[]

queryScheduler.maxUnavailable int Pod Disruption Budget maxUnavailable

1

queryScheduler.nodeSelector object Node selector for query-scheduler pods

{}

queryScheduler.podAnnotations object Annotations for query-scheduler pods

{}

queryScheduler.podLabels object Labels for query-scheduler pods

{}

queryScheduler.priorityClassName string The name of the PriorityClass for query-scheduler pods

null

queryScheduler.replicas int Number of replicas for the query-scheduler. It should be lower than `-querier.max-concurrent` to avoid generating back-pressure in queriers; it's also recommended that this value evenly divides the latter

0

queryScheduler.resources object Resource requests and limits for the query-scheduler

{}

queryScheduler.serviceAnnotations object Annotations for query-scheduler service

{}

queryScheduler.serviceLabels object Labels for query-scheduler service

{}

queryScheduler.terminationGracePeriodSeconds int Grace period to allow the query-scheduler to shutdown before it is killed

30

queryScheduler.tolerations list Tolerations for query-scheduler pods

[]

queryScheduler.topologySpreadConstraints list Topology Spread Constraints for query-scheduler pods The value will be passed through tpl.

[]
