
enterprise	object	Configuration for running Enterprise Loki

{
  "adminApi": {
    "enabled": true
  },
  "adminToken": {
    "secret": null
  },
  "canarySecret": null,
  "cluster_name": null,
  "config": "{{- if .Values.enterprise.adminApi.enabled }}\nadmin_client:\n  {{ include \"enterprise-logs.adminAPIStorageConfig\" . | nindent 2 }}\n{{ end }}\nauth:\n  type: {{ .Values.enterprise.adminApi.enabled | ternary \"enterprise\" \"trust\" }}\nauth_enabled: {{ .Values.loki.auth_enabled }}\ncluster_name: {{ include \"loki.clusterName\" . }}\nlicense:\n  path: /etc/loki/license/license.jwt\n",
  "enabled": false,
  "externalConfigName": "",
  "externalLicenseName": null,
  "gelGateway": true,
  "image": {
    "digest": null,
    "pullPolicy": "IfNotPresent",
    "registry": "docker.io",
    "repository": "grafana/enterprise-logs",
    "tag": "3.5.5"
  },
  "license": {
    "contents": "NOTAVALIDLICENSE"
  },
  "provisioner": {
    "additionalTenants": [],
    "affinity": {},
    "annotations": {},
    "apiUrl": "{{ include \"loki.address\" . }}",
    "enabled": true,
    "env": [],
    "extraVolumeMounts": [],
    "extraVolumes": [],
    "hookType": "post-install",
    "hostUsers": "nil",
    "image": {
      "digest": null,
      "pullPolicy": "IfNotPresent",
      "registry": "us-docker.pkg.dev",
      "repository": "grafanalabs-global/docker-enterprise-provisioner-prod/enterprise-provisioner",
      "tag": "latest"
    },
    "labels": {},
    "nodeSelector": {},
    "priorityClassName": null,
    "provisionedSecretPrefix": null,
    "securityContext": {
      "fsGroup": 10001,
      "runAsGroup": 10001,
      "runAsNonRoot": true,
      "runAsUser": 10001
    },
    "tolerations": []
  },
  "useExternalLicense": false,
  "version": "3.5.2"
}

enterprise.adminApi	object	If enabled, the correct admin_client storage will be configured. If disabled while running enterprise, make sure auth is set to `type: trust`, or that `auth_enabled` is set to `false`.

{
  "enabled": true
}

enterprise.adminToken.secret	string	Name of external secret containing the admin token for enterprise provisioner This secret must exist before deploying and must contain a key named 'token'

null

enterprise.canarySecret	string	Alternative name of the secret to store token for the canary

null

enterprise.cluster_name	string	Optional name of the GEL cluster, otherwise will use .Release.Name The cluster name must match what is in your GEL license

null

enterprise.externalConfigName	string	Name of the external config secret to use

""

enterprise.externalLicenseName	string	Name of external license secret to use

null

enterprise.gelGateway	bool	Use GEL gateway, if false will use the default nginx gateway

true

enterprise.image.digest	string	Overrides the image tag with an image digest

null

enterprise.image.pullPolicy	string	Docker image pull policy

"IfNotPresent"

enterprise.image.registry	string	The Docker registry

"docker.io"

enterprise.image.repository	string	Docker image repository

"grafana/enterprise-logs"

enterprise.image.tag	string	Docker image tag

"3.5.5"

enterprise.license	object	Grafana Enterprise Logs license In order to use Grafana Enterprise Logs features, you will need to provide the contents of your Grafana Enterprise Logs license, either by providing the contents of the license.jwt, or the name Kubernetes Secret that contains your license.jwt. To set the license contents, use the flag `--set-file 'enterprise.license.contents=./license.jwt'`

{
  "contents": "NOTAVALIDLICENSE"
}

enterprise.provisioner	object	Configuration for `provisioner` target Note: Uses enterprise.adminToken.secret value to mount the admin token used to call the admin api.

{
  "additionalTenants": [],
  "affinity": {},
  "annotations": {},
  "apiUrl": "{{ include \"loki.address\" . }}",
  "enabled": true,
  "env": [],
  "extraVolumeMounts": [],
  "extraVolumes": [],
  "hookType": "post-install",
  "hostUsers": "nil",
  "image": {
    "digest": null,
    "pullPolicy": "IfNotPresent",
    "registry": "us-docker.pkg.dev",
    "repository": "grafanalabs-global/docker-enterprise-provisioner-prod/enterprise-provisioner",
    "tag": "latest"
  },
  "labels": {},
  "nodeSelector": {},
  "priorityClassName": null,
  "provisionedSecretPrefix": null,
  "securityContext": {
    "fsGroup": 10001,
    "runAsGroup": 10001,
    "runAsNonRoot": true,
    "runAsUser": 10001
  },
  "tolerations": []
}

enterprise.provisioner.additionalTenants	list	Additional tenants to be created. Each tenant will get a read and write policy and associated token. Tenant must have a name and a namespace for the secret containting the token to be created in. For example additionalTenants: - name: loki secretNamespace: grafana

[]

enterprise.provisioner.affinity	object	Affinity for provisioner Pods The value will be passed through tpl.

{}

enterprise.provisioner.annotations	object	Additional annotations for the `provisioner` Job

{}

enterprise.provisioner.apiUrl	string	url of the admin api to use for the provisioner

"{{ include \"loki.address\" . }}"

enterprise.provisioner.enabled	bool	Whether the job should be part of the deployment

true

enterprise.provisioner.env	list	Additional Kubernetes environment

[]

enterprise.provisioner.extraVolumeMounts	list	Volume mounts to add to the provisioner pods

[]

enterprise.provisioner.extraVolumes	list	Additional volumes for Pods

[]

enterprise.provisioner.hookType	string	Hook type(s) to customize when the job runs. defaults to post-install

"post-install"

enterprise.provisioner.hostUsers	string	Use the host's user namespace in provisioner pods

"nil"

enterprise.provisioner.image	object	Provisioner image to Utilize

{
  "digest": null,
  "pullPolicy": "IfNotPresent",
  "registry": "us-docker.pkg.dev",
  "repository": "grafanalabs-global/docker-enterprise-provisioner-prod/enterprise-provisioner",
  "tag": "latest"
}

enterprise.provisioner.image.digest	string	Overrides the image tag with an image digest

null

enterprise.provisioner.image.pullPolicy	string	Docker image pull policy

"IfNotPresent"

enterprise.provisioner.image.registry	string	The Docker registry

"us-docker.pkg.dev"

enterprise.provisioner.image.repository	string	Docker image repository

"grafanalabs-global/docker-enterprise-provisioner-prod/enterprise-provisioner"

enterprise.provisioner.image.tag	string	Overrides the image tag whose default is the chart's appVersion

"latest"

enterprise.provisioner.labels	object	Additional labels for the `provisioner` Job

{}

enterprise.provisioner.nodeSelector	object	Node selector for provisioner Pods

{}

enterprise.provisioner.priorityClassName	string	The name of the PriorityClass for provisioner Job

null

enterprise.provisioner.provisionedSecretPrefix	string	Name of the secret to store provisioned tokens in

null

enterprise.provisioner.securityContext	object	Run containers as user `enterprise-logs(uid=10001)`

{
  "fsGroup": 10001,
  "runAsGroup": 10001,
  "runAsNonRoot": true,
  "runAsUser": 10001
}

enterprise.provisioner.tolerations	list	Tolerations for provisioner Pods

[]

enterprise.useExternalLicense	bool	Set to true when providing an external license

false
